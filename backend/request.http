# @host = https://epiploic-temperance-unwhimperingly.ngrok-free.dev/api
@host = http://localhost:3000/api
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI4ZTAyMDhiYy05YjI3LTQzNjUtYTFkYS0wYjVmODkzZDI0MGMiLCJlbWFpbCI6InRlc3QyQGV4YW1wbGUuY29tIiwiaWF0IjoxNzYyMjIxNTQzLCJleHAiOjE3NjIyMjE1NDh9.cKRGTlHg_-hzEeYbU_34k9ELNRmFey5OQllUpLkja0M
@refreshToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwYWEyMDcyMy1hOGVhLTRmNzEtODkwNC0xMWY5MTg3NjQxNGIiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLCJ0b2tlbklkIjoiOGNmNTBmYTMtNmUzYy00Mjc1LWFlYWUtM2VhMDkyYjI1YjE4IiwiaWF0IjoxNzYyNTg3NjY2LCJleHAiOjE3NjMxOTI0NjZ9.vzqlsDXfmKj0Tea3d8UX_opESgWk2hD4NJiXUviA2Xs


######################################
##               Auth               ##
######################################

###
POST {{host}}/auth/sign-up
Content-Type: application/json

{
	"email": "test@example.com",
	"password": "testpass",
	"firstName": "Test",
	"lastName": "User"
}

###
POST {{host}}/auth/sign-in
Content-Type: application/json

{
	"email": "test@example.com",
	"password": "testpass"
}

###
POST {{host}}/auth/refresh-token
Authorization: Bearer {{refreshToken}}

###
POST {{host}}/auth/sign-out
Authorization: Bearer {{refreshToken}}

#######################################
##              Twilio              ##
######################################

###
GET {{host}}/twilio/token

#######################################
##              Clients              ##
#######################################

###
POST {{host}}/clients
Content-Type: application/json

{
	"name": "New Client3",
	"email": "client3@test.com",
	"contactPerson": "Jeff2",
	"businessName": "Client Business2",
	"phoneNumber": "+1234567890"
}
###
GET {{host}}/clients

#######################################
##             Campaigns             ##
#######################################

###
GET {{host}}/campaigns?limit=4

###
GET {{host}}/campaigns?unassignedFlow=true

###
GET {{host}}/campaigns/19395bd8-13db-4f2f-a519-567889e7f4a3

###
POST {{host}}/campaigns/
Content-Type: application/json

{
	"name": "New Campaign",
	"description": "Description of the new campaign",
	"startDate": "2024-01-01T00:00:00Z",
	"endDate": "2024-12-31T23:59:59Z",
	"clientId": "55d76013-32d4-4c5c-8c0d-c0467401291a"
}

###
PATCH {{host}}/campaigns/64c98261-7d1e-4f69-a202-0b0d2783ea23
Content-Type: application/json

{
	# "clientId": undefined
	"flowId": "84cb5be1-3e70-489f-a7a8-88c360db34c5"
	# "flowId": null

}

###
GET {{host}}/campaigns/


#####################################
##              Users              ##
#####################################

###
GET {{host}}/users

###
POST {{host}}/users
Content-Type: application/json

{
	"firstName": "John",
	"lastName": "Doe",
	"email": "john.doe@example.com",
	"password": "securePassword123"
}

###
PATCH {{host}}/users/b2f610a3-8731-45fc-835e-55b00f581599
Content-Type: application/json

{
	"firstName": "WEEEEE"
}

###
GET {{host}}/users/b8a9171a-4ec6-4920-ad8e-d928fa42b7a2?includeUnassignedClients=true

###
GET {{host}}/users/b8a9171a-4ec6-4920-ad8e-d928fa42b7a2?includeClients=true

###
PATCH {{host}}/users/15f7650d-8c01-45c5-bbd4-27480d720504
Content-Type: application/json

{
	"clientIds": ["client1", "client2", "client3"]
}


##################################
##         User Clients         ##
##################################

###
GET {{host}}/user-clients



###################################
##             Flows             ##
###################################

###
POST {{host}}/flows
Content-Type: application/json

{
	"name": "New Flow",
	"steps": [
		{
			"name": "Step 1",
			"order": 1,
			"activities": [
				"52daf5f0-46d8-4695-b248-4fb7765e0008",
				"54eda8d9-5b1c-4186-932b-750d1af48069"
			]
		}
	]
}

###
POST {{host}}/flows
Content-Type: application/json

{
	"name": "New Flow",
	"steps": [
		{
			"name": "Step 1",
			"order": 1
		}
	]
}

###
GET {{host}}/flows



#####################
## Flow Activities ##
#####################


###
POST {{host}}/flow-activities
Content-Type: application/json

{
	"name": "Webhook",
	"type": "webhook"
}

###
GET {{host}}/flow-activities
#endregion

#################################################
##             Campaign Flow Steps             ##
#################################################

###
GET {{host}}/campaign-flow-steps


#############################################
##             Client Contacts             ##
#############################################

###
GET {{host}}/client-contacts

###
GET {{host}}/clients

###
POST {{host}}/client-contacts
Content-Type: application/json

{
	"name": "Anthony Naui",
	"contactNumber": "+61493233059",
	"type": "mobile",	
	"clientIds": ["55d76013-32d4-4c5c-8c0d-c0467401291a"]
}